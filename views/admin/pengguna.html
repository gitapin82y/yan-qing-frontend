<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Manajemen Pengguna</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Montserrat', sans-serif;
      background-color: #eaeaea;
    }
    .navbar-custom {
      background-color: #A32821;
      padding: 0.4rem 1rem;
    }
    .navbar-brand img { 
     height: 45px; 
    }
    .navbar-custom .nav-link {
      color: #fff !important;
      font-weight: 500;
      font-size: 0.95rem;
      padding: 0.6rem 1rem;
      display: flex;
      align-items: center;
      gap: 6px;
      border-radius: 5px;
      transition: color 0.2s ease;
    }
    .navbar-custom .nav-link.active,
    .navbar-custom .nav-link.active i {
      color: #FEBC2F !important;
      font-weight: 600;
    }
    .auth-card {
      border-radius: 8px;
      background: #fff;
      padding: 1.5rem;
    }
    .table-header th {
      background-color: #A32821;
      color: #fff;
      text-align: center;
      vertical-align: middle;
      font-weight: 600;
      border: none !important;
    }
    .custom-table td { 
        border: none !important; 
        padding: 12px; 
    }
    .custom-table tbody tr { 
        border-bottom: 2px solid #dcdcdc;
     }
    .custom-table tbody tr:last-child { 
        border-bottom: none; 
    }
    .custom-table td:first-child,
    .custom-table td:last-child { 
        text-align: center; 
    }
    .badge {
      font-size: 0.85rem;
      padding: 0.4em 0.75em;
      border-radius: 20px;
    }
    .btn-add { background-color: #A32821; color: #fff; font-weight: 600; }
    .btn-add:hover { background-color: #7A1616; color: #fff; }
    .btn-action {
      border: 2px solid transparent;
      border-radius: 6px;
      padding: 6px 9px;
      margin: 2px;
      cursor: pointer;
      font-size: 16px;
      background: #fff;
      transition: 0.3s;
    }
    .btn-view  {
     border-color: #A32821; 
     color: #A32821;
    }
    .btn-edit  { border-color: #FEBC2F; color: #FEBC2F; }
    .btn-delete{ border-color: #A32821; color: #FEBC2F; }
    .btn-view:hover {
     background-color: #8B0000; 
     color: #fff; 
    }
    .btn-edit:hover {
     background-color: #fbbf24; 
     color: #000;
    }
    .btn-delete:hover { 
     background-color: #ef4444; 
     color: #fff; }
    .custom-pagination .page-link {
      border: none; background: none; color: #000000;
      font-weight: 500; padding: 0.35rem 0.75rem; border-radius: 4px;
    }
    .custom-pagination .page-item.active .page-link {
      background-color: #9C1C1C; color: #fff;
    }
    .custom-header { background-color: #A32821; }
    .btn-generate, .btn-save {
      background-color: #A32821; 
      color: #fff; 
      font-weight: 600;
      border: none; 
      border-radius: 5px; 
      width: 100%; 
      padding: 10px 0;
    }
    .btn-generate:hover, .btn-save:hover {
     background-color: #7a1616;
    }
    .btn-close-modal {
    background-color: #A32821;
    color: #fff;
    font-weight: 600;
    border: none;
    border-radius: 5px;
    width: 100%;
    padding: 10px 0;
    transition: background-color 0.3s ease;
    }
    .btn-close-modal:hover {
    background-color: #7a1616;
    color: #fff;
    }

    @media (max-width: 768px) {
      .modal-dialog.modal-lg { max-width: 95%; }
      .custom-table th, .custom-table td { font-size: 0.85rem; }
      .navbar-nav { text-align: center; }
    }
</style>
</head>
<body>
<nav class="navbar navbar-expand-lg navbar-custom">
  <div class="container-fluid">
    <a class="navbar-brand" href="#">
      <img src="../../assets/img/logo-yanqing.png" alt="Logo">
    </a>
    <button class="navbar-toggler text-white" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav mx-auto">
        <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-house-door"></i> Dashboard</a></li>
        <li class="nav-item"><a class="nav-link active" href="pengguna.html"><i class="bi bi-people"></i> Pengguna</a></li>
        <li class="nav-item"><a class="nav-link" href="jadwal-pertemuan.html"><i class="bi bi-calendar-check"></i> Jadwal Pertemuan</a></li>
        <li class="nav-item"><a class="nav-link" href="video-kelas.html"><i class="bi bi-camera-video"></i> Video Kelas</a></li>
        <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-bar-chart"></i> Report Harian</a></li>
        <li class="nav-item"><a class="nav-link" href="#"><i class="bi bi-book"></i> Materi Belajar</a></li>
      </ul>
      <ul class="navbar-nav ms-auto">
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" href="#" data-bs-toggle="dropdown">
            <i class="bi bi-person-circle"></i> Admin
          </a>
          <ul class="dropdown-menu dropdown-menu-end">
            <li><a class="dropdown-item" href="#"><i class="bi bi-person"></i> Profil</a></li>
            <li><a class="dropdown-item" href="#"><i class="bi bi-gear"></i> Pengaturan</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-box-arrow-right"></i> Logout</a></li>
          </ul>
        </li>
      </ul>
    </div>
  </div>
</nav>

<div class="container my-4">
  <div class="auth-card">
    <div class="d-flex justify-content-between align-items-center mb-3">
      <h5 class="mb-0 fw-bold">Manajemen Pengguna</h5>
      <button class="btn btn-add" data-bs-toggle="modal" data-bs-target="#tambahPenggunaModal">Tambah Pengguna</button>
    </div>

    <div class="d-flex justify-content-between align-items-center mb-3">
      <div>
        <label>Tampilkan
          <select class="form-select d-inline-block w-auto mx-2">
            <option>10</option>
            <option>25</option>
            <option>50</option>
            <option>100</option>
          </select>
          entri
        </label>
      </div>
      <div>
        <label>Cari:
          <input type="search" class="form-control d-inline-block w-auto ms-2">
        </label>
      </div>
    </div>

    <div class="table-responsive">
      <table class="table custom-table align-middle">
        <thead class="table-header">
          <tr>
            <th>ID</th>
            <th>Nama</th>
            <th>Role</th>
            <th>Status/Paket</th>
            <th>Aksi</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>L001</td>
            <td>Wang Ming</td>
            <td><span class="badge bg-primary">Laoshi</span></td>
            <td><span class="badge bg-success">Aktif</span></td>
            <td>
              <button class="btn-action btn-view" onclick="showDetail('L001')"><i class="bi bi-eye"></i></button>
              <button class="btn-action btn-edit"><i class="bi bi-pencil"></i></button>
              <button class="btn-action btn-delete"><i class="bi bi-trash"></i></button>
            </td>
          </tr>
          <tr>
            <td>M001</td>
            <td>Chen Li</td>
            <td><span class="badge bg-info text-light">Murid</span></td>
            <td><span class="badge bg-info text-light">Paket Private</span></td>
            <td>
              <button class="btn-action btn-view"><i class="bi bi-eye"></i></button>
              <button class="btn-action btn-edit"><i class="bi bi-pencil"></i></button>
              <button class="btn-action btn-delete"><i class="bi bi-trash"></i></button>
            </td>
          </tr>
          <tr>
            <td>M002</td>
            <td>Andrew</td>
            <td><span class="badge bg-info text-light">Murid</span></td>
            <td><span class="badge bg-info text-light">Paket Reguler</span></td>
            <td>
              <button class="btn-action btn-view"><i class="bi bi-eye"></i></button>
              <button class="btn-action btn-edit"><i class="bi bi-pencil"></i></button>
              <button class="btn-action btn-delete"><i class="bi bi-trash"></i></button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>

    <div class="d-flex justify-content-between mt-3 align-items-center">
      <span>Menampilkan 1 sampai 3 dari 3 entri</span>
      <nav>
       <ul class="pagination custom-pagination mb-0 justify-content-center">
  <li class="page-item disabled">
    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Sebelumnya</a>
  </li>
  <li class="page-item active">
    <a class="page-link" href="#">1</a>
  </li>
  <li class="page-item disabled">
    <a class="page-link" href="#" tabindex="-1" aria-disabled="true">Selanjutnya</a>
  </li>
</ul>
      </nav>
    </div>
  </div>
</div>

<div class="modal fade" id="tambahPenggunaModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog">
    <div class="modal-content">
      <div class="modal-header custom-header text-white">
        <h5 class="modal-title fw-semibold">Tambah Pengguna Baru</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <form id="formTambahPengguna">
          <div class="mb-3">
            <label class="form-label">Nama Lengkap*</label>
            <input type="text" class="form-control" id="namaLengkap" placeholder="Masukkan Nama Lengkap" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Email*</label>
            <input type="email" class="form-control" id="email" placeholder="Masukkan Email" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Telepon*</label>
            <input type="text" class="form-control" id="telepon" placeholder="Masukkan Nomor Telepon" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Role *</label>
            <select class="form-select" id="roleSelect" required>
              <option value="">Pilih Role</option>
              <option value="Laoshi">Laoshi</option>
              <option value="Murid">Murid</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Status/Paket*</label>
            <select class="form-select" id="statusSelect" required>
              <option value="">Pilih Status/Paket</option>
              <option value="Aktif">Aktif</option>
              <option value="Non-Aktif">Non-Aktif</option>
              <option value="Reguler">Reguler</option>
              <option value="Semi Private">Semi Private</option>
              <option value="Private">Private</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Level*</label>
            <select class="form-select" id="levelSelect" required>
              <option value="">Pilih Level</option>
              <option value="Beginner">Beginner</option>
              <option value="Intermediate">Intermediate</option>
              <option value="Advanced">Advanced</option>
            </select>
          </div>

          <div class="d-grid mb-3">
            <button type="button" id="btnGenerate" class="btn btn-generate">Generate ID & Kata Sandi</button>
          </div>

          <div class="mb-3">
            <label class="form-label">ID Pengguna*</label>
            <input type="text" class="form-control" id="idPengguna" placeholder="Manual atau Otomatis" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Kata Sandi*</label>
            <div class="input-group">
              <input type="text" class="form-control" id="kataSandi" placeholder="Manual atau Otomatis" required>
              <button type="button" class="btn btn-outline-secondary" id="togglePassword"><i class="bi bi-eye"></i></button>
            </div>
          </div>
          <div class="d-grid">
            <button type="submit" class="btn btn-save">Simpan Data</button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="detailPenggunaModal" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header custom-header text-white">
        <h5 class="modal-title">Detail Pengguna</h5>
        <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <h6 class="fw-bold mb-3">Informasi Pengguna</h6>
        <p><strong>ID :</strong> <span id="detailId"></span></p>
        <p><strong>Nama :</strong> <span id="detailNama"></span></p>
        <p><strong>Role :</strong> <span id="detailRole" class="badge"></span></p>
        <p><strong>Status :</strong> <span id="detailStatus" class="badge"></span></p>
        <p><strong>Email :</strong> <span id="detailEmail"></span></p>
        <p><strong>Telepon :</strong> <span id="detailTelepon"></span></p>
        <h6 class="fw-bold mt-4 mb-2">Kehadiran Pertemuan</h6>
        <div id="detailKehadiran"></div>
      </div>
        <div class="modal-footer">
            <button type="button" class="btn-close-modal" data-bs-dismiss="modal">Tutup</button>
        </div>
    </div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script>
  function generatePassword(length = 8) {
    const chars = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";
    let pass = "";
    for (let i = 0; i < length; i++) {
      pass += chars.charAt(Math.floor(Math.random() * chars.length));
    }
    return pass;
  }

 document.getElementById("btnGenerate").addEventListener("click", () => {
    const role = document.getElementById("roleSelect").value;
    let prefix = "U";
    if (role === "Laoshi") prefix = "L";
    if (role === "Murid") prefix = "M";

    const randomNum = String(Math.floor(Math.random() * 1000)).padStart(3, "0");
    document.getElementById("idPengguna").value = prefix + randomNum;
    document.getElementById("kataSandi").value = generatePassword();
  });
  document.getElementById("togglePassword").addEventListener("click", function() {
    const input = document.getElementById("kataSandi");
    const icon = this.querySelector("i");
    if (input.type === "password") {
      input.type = "text";
      icon.classList.remove("bi-eye");
      icon.classList.add("bi-eye-slash");
    } else {
      input.type = "password";
      icon.classList.remove("bi-eye-slash");
      icon.classList.add("bi-eye");
    }
  });

  document.getElementById("roleSelect").addEventListener("change", function() {
    const prefix = this.value === "Laoshi" ? "L" : "M";
    const randomNum = String(Math.floor(Math.random() * 1000)).padStart(3, "0");
    document.getElementById("idPengguna").value = prefix + randomNum;
  });
  const penggunaDetail = {
  L001: {
    id: "L001",
    nama: "Wang Ming",
    role: "Laoshi",
    status: "Aktif",
    email: "anging@gmail.com",
    telepon: "08123895472",
    kehadiran: [
      { nama: "Chen Li", paket: "Private", data: [
        { pertemuan: "1/10, 21 Agust", status: "Masuk" },
        { pertemuan: "2/10, 20 Agust", status: "Tidak Masuk" },
        { pertemuan: "3/10, 19 Agust", status: "Masuk" },
      ]},
      { nama: "Andrew", paket: "Semi Private", data: [
        { pertemuan: "1/10, 18 Agust", status: "Masuk" },
        { pertemuan: "2/10, 17 Agust", status: "Masuk" },
      ]},
    ]
  }
};

function showDetail(id) {
  const data = penggunaDetail[id];
  if (!data) return;

  document.getElementById("detailId").innerText = data.id;
  document.getElementById("detailNama").innerText = data.nama;
  document.getElementById("detailEmail").innerText = data.email;
  document.getElementById("detailTelepon").innerText = data.telepon;

  const roleEl = document.getElementById("detailRole");
  roleEl.innerText = data.role;
  roleEl.className = "badge " + (data.role === "Laoshi" ? "bg-primary" : "bg-info text-light");

  const statusEl = document.getElementById("detailStatus");
  statusEl.innerText = data.status;
  statusEl.className = "badge " + (data.status === "Aktif" ? "bg-success" : "bg-secondary");

  const container = document.getElementById("detailKehadiran");
  container.innerHTML = "";
  data.kehadiran.forEach(murid => {
    let box = `<div class="border rounded p-2 mb-2">
      <div class="d-flex justify-content-between">
        <strong>${murid.nama}</strong>
        <span>${murid.paket}</span>
      </div>`;
    murid.data.forEach(item => {
      box += `<div class="d-flex justify-content-between">
        <span>Pertemuan ${item.pertemuan}</span>
        <span>${item.status}</span>
      </div>`;
    });
    box += `</div>`;
    container.innerHTML += box;
  });

  const modal = new bootstrap.Modal(document.getElementById('detailPenggunaModal'));
  modal.show();
}
</script>
</body>
</html>
